# TestCode

## TestCode는 무엇인가?
테스트 코드는 컴퓨터 프로그래밍에서 소스 코드의 특정 모듈이 의도된 대로 정확히 작동하는지 검증하는 절차입니다.

## TestCode를 왜 사용하는가?
코드를 작성한 후에 그 코드가 제대로 작동하는지 알 수 있는 가장 쉬운 방법은 컴파일해서 실행해보는 것입니다. 이 방법은 프로그래밍을 입문하면서 제일 처음 배우는 디버깅 방법이기도 하다. 하지만 이 방법에는 한계가 있다.

1. 코드가 바뀔 때마다 이전에 추가해던 기능이 제대로 동작하는지 하나하나 검사해야된다.
2. 모든 예외를 검사하는데 상당한 시간과 노력이 든다.
3.  코드 리팩토링(**리팩토링 : 코딩을 하고나면 코드가 좀 비효율적인 면이 생기기 마련인데, 동작하는것은 그대로 두고 코드 자체를 효율적으로 만들어서 코드의 가독성과 유지보수를 좋게 만들며, 중복된 코드를 줄이는것을 말한다.**) 과정에서 코드가 망가지지 않았는지 알 수 있는 쉬운 방법이 없다

위의 3가지의 한계때문에 테스트 코드 작성을 권한다.

## TestCode의 작성의 팁(?)

1. 요구사항을 명확하고 온전하게 이해하라.

테스트해야 하는 정황을 이해하고 테스트 요건을 도출한다. 테스트 요건등을 테스트 코드의 주석으로 작성하면서 테스트 하려는 바와 테스트를 하는 방법에 대해 고민할 수 있다.

2. 테스트 케이스는 의미있고 쉽게 이해 할 수 있어야 한다.

테스트 코드는 계속 수행된다. 나중에 보더라도 이 테스트가 무엇이고, 무슨 의도를 갖고 있는지, 바로 파악할 수 있어야 한다.

3. 하나의 테스트 케이스에서는 하나의 흐름만을 테스트 하도록 해라.
(하나의 테스트 케이스에서 검증문(assert)이 한개여야 한다는 말은 아니다.)

검증하려는 의도가 1개여야 테스트가 실패했을 때 직관적으로 문제상황을 이해하고 원인을 유추할 수 있다.

4. 결함은 경계에 서식한다.

문자 : null, 빈 문자, 공백 문자, 허용 자릿수 보다 긴 문자열, 예약어, 다국어
(예약어(豫約語, 영어: reserved word)는 컴퓨터 프로그래밍 언어에서 이미 문법적인 용도로 사용되고 있기 때문에 식별자로 사용할 수 없는 단어들이다)
숫자 : 음수, 0, 하한값 -1, 상한값 +1, 숫자가 아닌 표시, + 기호로 시작하는 값

코드값 : 유효하지 않은 코드값

위,경도 값 : 90도 180도 이상 이하의 값

페이지 값 : 존재하지 않는 페이지

날짜 : 유효하지 않는 년,월,일 날짜 포멧에 어긋나는 날짜값

5. 테스트의 레벨에 따른 목적과 한계를 이해한다.

단위 테스트에서 통합 테스트의 내용을, 통합 테스트에서 단위 테스트의 내용을 테스트하지 말라. 
(**유닛 테스트: 함수 하나하나와 같이 코드의 작은 부분을 테스트하는 것
통합 테스트: 서로 다른 시스템들의 상호작용이 잘 이루어 지는지 테스트하는 것**)
단위 테스는 외부적인 상황은 배제하고 단위 모듈 자체에 대해 꼼꼼히 테스트한다. 그리고 통합테스는 꼼꼼한테스트, 중복된 테스트가 아니라 통합 흐름에 대해 집중한다.

6. 테스트 케이스를 통해 제품이 어떻게 동작하는지를 서술한다.

특정조건, 특정상황에서 제품이 어떻게 동작하는지를 표현하는 테스트는 동료 개발자, 사용자에게 제품 스펙 이상의 설명서가 될 수 있다.

7. 누구나 이해 가능하도록 쉬운 테스트 코드를 유지하라.

기존에 작성되어 있던 테스트 코드의 불필요한 주석, 쓰이지 않는 코드, 적절하지 않은 메소드 명 등을 모두 정리하라. 테스트 코드는 개발코드와 다르다. 과도하게 사용된 테스트 라이브러리가 있다면 테스트 코드에 직접 표기하라.

테스트 결과를 자동으로 검증해 주는 유틸 클래스를 사용하고 있으면 테스트 결과가 어떻게 동작해야하는지 알기 어렵다.

테스트를 자동으로 수행하는 클래스가 있다면 어떤 테스트로 테스트를 수행하는지 알기 어렵다.

8. 테스트 코드 자체만으로 어떤 내용을 테스트 하려는지 표현하라.

의미있는 테스트 케이스명을 사용한다.

의미있는 전달을 위해 의미있는 변수명을 선언하고 테스트에 사용한다.

적절히 한 줄을 띄어 쓴다.

예) Max값보다 큰 min값에 대한 테스트의 경우
* 케이스 명 : biggerMinLongitudeNormal
* 변수 명 : biggerTanMaxMinLongitude

9. 작은 변경에 대해서도 이 변경을 알려 줄 수 있는 테스트 코드를 작성하라.

프로그램이 변경되면 테스트 케이스(코드)도 수정해야 하도록 테스트 케이스를 작성하라.

프로그램을 변경했는데도 테스트 코드를 수정할 필요가 없다면 누락된 테스트가 있을 가능성이 높다.

10. 에러 발생시 발생 위치, 대략적인 원인을 제공해 줄 수 있도록 테스트 코드를 작성하라.

예)
* 테스트 코드 작성할 때 assert문에 실패 시 표시되는 메시지를 추가한다.
* 테스트 라이브러리에서 에러 발생시 해당 케이스 index, 입력값, 변수명, 기대값과 실제값 등을 제공하도록 한다.

11. 테스트 결과는 사람이 아닌 코드가 검증하도록 하라

테스트 수행 결과값을 System.out.println을 표시하던 부분을 assert문으로 대체

12. assert문을 제대로 사용하라.

의외로 assert문이 늘 성공하도록 작성된 코드가 많다. 

13. 단순히 코드를 반복하지 않기 위하여 테스트 라이브러리를 만들지 마라.

테스트 코드는 개발코드가 아니다. 코드가 반복되는 상태로 그대로 두는 방식(오픈 코딩)을 유지하라.

별도 라이브러리를 사용하는 테스트는 검토하기도 어렵고, 디버그도 어렵고, 다시 수정하기도 어렵다.

14. 테스트 외부와 내부를 구분하라.

- 테스트 실행과 사전조건/사후 행동을 구분하라.
- 테스트 데이터 세팅 부분과 테스트 실행을 구분하는 것도 좋은 접근이다.

장점
* 테스트를 이해하기 쉽고, 검토하기 쉬워진다.
* 직관적으로 버그를 파악할 수 있다.

## 좋은 테스트 케이스
좋은 테스트 케이스는 다른 사람이 작성했더라도 수행하는 사람이 각 단계를 즐겁게 따라 할 수 있는 케이스다. 테스트 케이스는 여러 사람에 의해 지속적으로 수행될 때 그 효율성이 극대화하기 때문이다.

# 참고
* https://ssowonny.medium.com/%EC%84%A4%EB%A7%88-%EC%95%84%EC%A7%81%EB%8F%84-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%BD%94%EB%93%9C%EB%A5%BC-%EC%9E%91%EC%84%B1-%EC%95%88-%ED%95%98%EC%8B%9C%EB%82%98%EC%9A%94-b54ec61ef91a
* https://velog.io/@leejh3224/%EC%8B%A4%EC%9A%A9%EC%A0%81%EC%9D%B8-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%BD%94%EB%93%9C-%EC%9E%91%EC%84%B1%ED%95%98%EA%B8%B0
* https://hgney.com/977
* https://www.slideshare.net/genycho/ss-64153730